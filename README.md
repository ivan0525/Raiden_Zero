# 雷电（Web 版）

一个基于 HTML5 Canvas 与原生 JavaScript 的纵版射击游戏，包含玩家战机、僚机、跟踪导弹、升级系统、主动技能、粒子爆炸、震屏与霓虹星空等效果。可一键部署到 GitHub Pages。

## 游玩说明
- 移动：方向键 或 `W/A/S/D`
- 射击：`空格` 或 `J`
- 炸弹：`K`（清屏，消耗充能）
- 狂热：`L`（短时间提升射速与弹幕，消耗充能）
- 自动开火：`F` 开/关
- 开始/重开：点击首页按钮

## 核心玩法
- 敌机会按波次生成，分直线与之字两种移动模式，逐渐加速与增多。
- 玩家击破敌机获得分数，达到阈值触发升级选择（三选一）。
- 升级选项：射速+15%、扩散+1、速度+10%、炸弹+1、狂热+1。
- 僚机随行并辅助射击；导弹自动生成，优先跟踪最近的敌机并命中爆炸。
- 玩家受伤会短暂无敌并显示护盾；生命降至 0 游戏结束。

## 运行与构建
项目采用 Vite 构建，推荐使用 pnpm。

- 本地开发
  - 安装依赖：`pnpm install`
  - 启动开发：`pnpm dev`
  - 构建预览：`pnpm build && pnpm preview`

- GitHub Pages 部署
  - 默认工作流位于 `.github/workflows/deploy.yml`
  - 推送到 `main` 分支后自动构建并部署
  - 首次需在仓库 Settings → Pages 选择 Source 为 GitHub Actions
  - 访问地址：
    - 用户/组织页仓库：`https://<user>.github.io/`
    - 项目页仓库：`https://<user>.github.io/<repo>/`

## 技术设计

### 架构概览
- 单页应用，无框架依赖；使用 `requestAnimationFrame` 驱动主循环。
- 输入（键盘）、更新（物理/碰撞/刷怪/技能）、渲染（背景/实体/特效/HUD）三段式执行。
- 以轻量对象数组管理实体：`player`、`bullets`、`enemies`、`missiles`、`particles`。

### 渲染管线
- 背景：多层视差星空（`stars1/2/3`），使用 `lighter` 混合营造霓虹。
- 实体：
  - 玩家与僚机：几何绘制，玩家带渐变尾焰；僚机跟随摆动。
  - 子弹/导弹：发光点渲染；导弹带尾烟粒子轨迹。
  - 敌机：几何矩形机体，可替换为贴图（可扩展）。
- 视觉增强：爆炸粒子、HUD 霓虹描边、屏幕暗角、命中/受击震屏。

### 逻辑与数值
- 刷怪：按定时器批量生成，之字/直线移动；越界清理。
- 碰撞：
  - 子弹/敌机：AABB 命中，扣血、爆炸、加分；清理死亡实体。
  - 玩家/敌机：受击判定，掉血/无敌/震屏/爆炸；生命耗尽触发 `gameOver()`。
- 升级：分数到达阈值触发暂停并弹出选择层；选定后提高阈值并继续。
- 技能：
  - 炸弹：清屏爆炸，消耗充能。
  - 狂热：缩短冷却、增强弹幕，定时关闭。
- 僚机/导弹：
  - 僚机与玩家联动射击，扩散随等级提升。
  - 导弹自动生成，按最近距离制导并带爆炸伤害与尾烟。

### 性能策略
- 全局复用 `canvas/context` 与渐变；尽量批量绘制，适度使用 `lighter`。
- 粒子数量与寿命受控；越界/过期即时回收。
- 震屏使用轻量平移并指数衰减。

### 目录结构
```
.
├─ index.html          # 入口页与开始/升级弹层
├─ src/
│  └─ main.js          # 游戏主逻辑与渲染
├─ package.json        # 脚本与依赖
├─ vite.config.js      # 构建配置，支持 BASE_PATH
├─ .github/workflows/
│  └─ deploy.yml       # GitHub Pages 自动部署工作流（pnpm）
└─ .gitignore
```

### 可扩展性
- 贴图管线：引入 Image 资源并以 `drawImage` 替换几何绘制，实现美术皮肤。
- 敌机/关卡：按权重/波次/路径表定义刷怪脚本；新增 Boss 与多阶段模式。
- 武器系统：新增穿透/分裂/蓄力/激光；加入伤害、射速、特效数据表。
- UI/音效：加入音频反馈、暂停菜单、结算页与排行榜。

## 许可
- 源码默认 MIT（如需其它协议，请自行修改）。
